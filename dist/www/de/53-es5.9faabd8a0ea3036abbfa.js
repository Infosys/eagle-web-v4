/*               "Copyright 2020 Infosys Ltd.
               Use of this source code is governed by GPL v3 license that can be found in the LICENSE file or at https://opensource.org/licenses/GPL-3.0
               This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License version 3"*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{Jmk9:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("XlPw"),o=n("VX4o"),r=n("CcnG"),c=n("t/Na"),s=function(){function t(t,e){this.http=t,this.telemetrySvc=e,this.API_BASE="/clientApi/v2",this.USER_API=this.API_BASE+"/user",this.apiEndpoints={USER_HISTORY:this.USER_API+"/history",USER_CONTINUE_LEARNING:this.USER_API+"/history/continue"}}return t.prototype.fetchContinueLearning=function(t,e,n){return this.http.get(this.apiEndpoints.USER_CONTINUE_LEARNING+"?pageSize="+t+(e?"&pageState="+e:"")+(n?"&email="+n:""))},t.prototype.saveContinueLearning=function(t,e){var n=this.apiEndpoints.USER_CONTINUE_LEARNING;return Object.keys(t).length?this.http.post(n,t):(this.telemetrySvc.errorTelemetryEvent(n,t,e),Object(i.a)({message:"EMPTY_REQUEST"}))},t.prototype.fetchContentContinueLearning=function(t){return this.http.get(this.apiEndpoints.USER_CONTINUE_LEARNING+"/"+t)},t.prototype.addHistory=function(t){return this.http.post(this.apiEndpoints.USER_HISTORY+"/"+t,{})},t.prototype.deleteHistory=function(t){return this.http.delete(this.apiEndpoints.USER_HISTORY+"/"+t)},t.ngInjectableDef=r["\u0275\u0275defineInjectable"]({factory:function(){return new t(r["\u0275\u0275inject"](c.c),r["\u0275\u0275inject"](o.a))},token:t,providedIn:"root"}),t}()},dPHs:function(t,e,n){"use strict";n.r(e);var i=n("CcnG"),o=function(){return function(){}}(),r=n("pMnS"),c=n("xXU7"),s=n("hFHK"),a=n("lGQG"),u=n("oVAt"),p=n("VX4o"),l=n("qfBg"),d=function(){function t(t,e,n,i,o,r){this.route=t,this.domSanitizer=e,this.userSvc=n,this.authSvc=i,this.telemetrySvc=o,this.historySvc=r}return t.prototype.ngOnInit=function(){var t=this;this.paramSubscription=this.route.data.subscribe(function(e){t.processedContent=e.playerDetails.processedResource,t.collectionId=e.playerDetails.toc.identifier,t.onInItFunction()})},t.prototype.onInItFunction=function(){var t=this;this.raiseEvent("LOADED"),this.telemetryIntervalSubscription=Object(c.a)(3e4).subscribe(function(){t.processedContent&&t.processedContent.content&&t.processedContent.content.identifier&&(t.raiseEvent("RUNNING"),null!=t.collectionId&&t.collectionId!==t.processedContent.content.identifier||t.historySvc.saveContinueLearning({contextPathId:t.processedContent.content.identifier,resourceId:t.processedContent.content.identifier,data:JSON.stringify({timestamp:Date.now()}),percentComplete:100},t.processedContent.content.identifier).toPromise().catch(function(t){return console.warn(t)}))}),this.iframeUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.processedContent.content.artifactUrl)},t.prototype.ngOnDestroy=function(){this.telemetryIntervalSubscription&&this.telemetryIntervalSubscription.unsubscribe(),this.raiseEvent("ENDED")},t.prototype.iframeLoaded=function(){var t=this;this.userSvc.fetchUserGraphProfile().subscribe(function(e){var n={jwtToken:t.authSvc.token,host:document.baseURI,targetUrl:t.processedContent.content.artifactUrl,resourceId:t.processedContent.content.identifier,empId:e&&e.companyName||""},i=t.fpIframeElement.nativeElement.contentWindow;setTimeout(function(){i.postMessage(n,"*")},2e3)})},t.prototype.raiseEvent=function(t){this.telemetrySvc.playerTelemetryEvent({app:"WEB_PLAYER_PLUGIN",plugin:"certifications",type:"TELEMETRY",state:t,data:{courseId:this.collectionId,identifier:this.processedContent.content.identifier,isCompleted:!0,mimeType:s.a.html,isIdeal:!1,url:this.processedContent.content.artifactUrl}})},t}(),f=n("ZYCi"),h=n("ZYjt"),m=i["\u0275crt"]({encapsulation:0,styles:[[".ilpfp-iframe[_ngcontent-%COMP%]{width:100%;height:100%;display:block}"]],data:{}});function y(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{fpIframeElement:0}),(t()(),i["\u0275eld"](1,0,[[1,0],["fpIframe",1]],null,0,"iframe",[["allow","fullscreen; accelerometer; autoplay; encrypted-media; gyroscope; microphone; camera;"],["class","ilpfp-iframe"],["title","Grundlagenprogramm"]],[[8,"src",5]],[[null,"load"]],function(t,e,n){var i=!0;return"load"===e&&(i=!1!==t.component.iframeLoaded()&&i),i},null,null))],null,function(t,e){t(e,1,0,e.component.iframeUrl)})}function v(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ws-ilp-fp",[],null,null,null,y,m)),i["\u0275did"](1,245760,null,0,d,[f.a,h.b,l.a,a.a,p.a,u.a],null,null)],function(t,e){t(e,1,0)},null)}var I=i["\u0275ccf"]("ws-ilp-fp",d,v,{},{},[]),E=n("Ip0R"),S=n("zsyL"),C=n("RB3e"),b=function(){return function(){}}();n.d(e,"IlpFpModuleNgFactory",function(){return g});var g=i["\u0275cmf"](o,[],function(t){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[r.a,I]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,E.q,E.p,[i.LOCALE_ID,[2,E.L]]),i["\u0275mpd"](4608,S.a,S.a,[C.a]),i["\u0275mpd"](1073742336,E.c,E.c,[]),i["\u0275mpd"](1073742336,f.s,f.s,[[2,f.x],[2,f.o]]),i["\u0275mpd"](1073742336,b,b,[]),i["\u0275mpd"](1073742336,o,o,[]),i["\u0275mpd"](256,i.LOCALE_ID,"de",[]),i["\u0275mpd"](1024,f.m,function(){return[[{path:"",pathMatch:"full",component:d,resolve:{playerDetails:S.a}}]]},[]),i["\u0275mpd"](256,i.TRANSLATIONS_FORMAT,"xlf",[])])})},oVAt:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("Jmk9"),o=n("CcnG"),r=function(){function t(t){this.historyApiSvc=t}return t.prototype.fetchContinueLearning=function(t,e,n){return this.historyApiSvc.fetchContinueLearning(t,e,n)},t.prototype.fetchContentContinueLearning=function(t){return this.historyApiSvc.fetchContentContinueLearning(t)},t.prototype.saveContinueLearning=function(t,e){return this.historyApiSvc.saveContinueLearning(t,e)},t.prototype.addToHistory=function(t){return this.historyApiSvc.addHistory(t)},t.ngInjectableDef=o["\u0275\u0275defineInjectable"]({factory:function(){return new t(o["\u0275\u0275inject"](i.a))},token:t,providedIn:"root"}),t}()},xXU7:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("6blF"),o=n("T1DM"),r=n("/21U");function c(t,e){return void 0===t&&(t=0),void 0===e&&(e=o.a),(!Object(r.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=o.a),new i.a(function(n){return n.add(e.schedule(s,t,{subscriber:n,counter:0,period:t})),n})}function s(t){var e=t.subscriber,n=t.counter,i=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:i},i)}}}]);