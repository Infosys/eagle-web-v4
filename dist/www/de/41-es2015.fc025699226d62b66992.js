/*               "Copyright 2020 Infosys Ltd.
               Use of this source code is governed by GPL v3 license that can be found in the LICENSE file or at https://opensource.org/licenses/GPL-3.0
               This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License version 3"*/
(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{JRSQ:function(t,e,n){"use strict";n.r(e);var i=n("8Y7J");class r{}var o=n("pMnS"),s=n("bujt"),a=n("Fwaw"),l=n("/HVE"),u=n("5GAg"),c=n("omvX"),d=n("SVse"),p=n("Xd0L"),h=n("TtEo"),m=n("02hT");class f{constructor(){this.interactionGroup=[],this.interactionGroupEvent=new i.EventEmitter,this.currentQuestionIndex=0,this.interactionResponse={}}ngOnInit(){this.interactionGroup.length&&this.interactionGroup.forEach((t,e)=>{this.interactionResponse[e]=[]})}showNextQuestion(){this.currentQuestionIndex+1===this.interactionGroup.length?this.interactionDone():this.currentQuestionIndex+=1}showPrevQuestion(){this.currentQuestionIndex-=1}skipAll(){this.interactionDone()}selectOption(t){if(!this.interactionGroup[this.currentQuestionIndex].isSubmitted)if("SCQ"===this.interactionGroup[this.currentQuestionIndex].type)this.interactionResponse[this.currentQuestionIndex]=[],this.interactionResponse[this.currentQuestionIndex].push(t);else if("MCQ"===this.interactionGroup[this.currentQuestionIndex].type){const e=this.interactionResponse[this.currentQuestionIndex].indexOf(t);-1===e?this.interactionResponse[this.currentQuestionIndex].push(t):this.interactionResponse[this.currentQuestionIndex].splice(e,1)}}checkIfSelected(t){return this.interactionResponse[this.currentQuestionIndex].indexOf(t)>-1}checkIfCorrect(t){const e=this.interactionResponse[this.currentQuestionIndex].indexOf(t);return!!(this.interactionGroup[this.currentQuestionIndex].options[t].isCorrect&&e>-1)}submitInteraction(){this.interactionGroup[this.currentQuestionIndex].isSubmitted=!0}interactionDone(){this.interactionGroupEvent.emit("resume")}}var v=i["\u0275crt"]({encapsulation:0,styles:[[".option-text[_ngcontent-%COMP%]{width:48%;text-align:center;padding:8px 12px;box-sizing:border-box;margin-bottom:8px;font-size:.95rem;line-height:1.3;cursor:pointer}@media only screen and (max-width:599px){.option-text[_ngcontent-%COMP%]{width:100%}}.question[_ngcontent-%COMP%]{padding:8px 12px;box-sizing:border-box;margin-top:16px}.correct[_ngcontent-%COMP%]{color:#fff!important;background:green!important}.wrong[_ngcontent-%COMP%]{color:#fff!important;background:red!important}"]],data:{}});function b(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["mat-raised-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.skipAll()&&i),i},s.d,s.b)),i["\u0275did"](1,180224,null,0,a.b,[i.ElementRef,l.a,u.h,[2,c.a]],null,null),(t()(),i["\u0275ted"](-1,0,[" Alle \xfcberspringen "]))],null,function(t,e){t(e,0,0,i["\u0275nov"](e,1).disabled||null,"NoopAnimations"===i["\u0275nov"](e,1)._animationMode)})}function g(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["mat-raised-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showNextQuestion()&&i),i},s.d,s.b)),i["\u0275did"](1,180224,null,0,a.b,[i.ElementRef,l.a,u.h,[2,c.a]],null,null),(t()(),i["\u0275ted"](-1,0,[" \xdcberspringen Sie diese "]))],null,function(t,e){t(e,0,0,i["\u0275nov"](e,1).disabled||null,"NoopAnimations"===i["\u0275nov"](e,1)._animationMode)})}function I(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"h3",[["class","mat-h3 mat-accent mat-toolbar question"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i["\u0275ted"](2,null,["Q"," of ",". "])),(t()(),i["\u0275ted"](3,null,[" "," "]))],null,function(t,e){var n=e.component;t(e,2,0,n.currentQuestionIndex+1,null==n.interactionGroup?null:n.interactionGroup.length),t(e,3,0,n.interactionGroup[n.currentQuestionIndex].question)})}function y(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"div",[["class","option-text mat-toolbar mat-ripple"],["matRipple",""],["role","button"]],[[2,"mat-ripple-unbounded",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.selectOption(t.context.index)&&i),i},null,null)),i["\u0275prd"](512,null,d.G,d.H,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["\u0275did"](2,278528,null,0,d.m,[d.G],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](3,{"mat-primary":0,correct:1,wrong:2}),i["\u0275did"](4,212992,null,0,p.x,[i.ElementRef,i.NgZone,l.a,[2,p.m],[2,c.a]],null,null),(t()(),i["\u0275ted"](5,null,["",""]))],function(t,e){var n=e.component,i=t(e,3,0,n.checkIfSelected(e.context.index),n.checkIfCorrect(e.context.index)&&n.checkIfSelected(e.context.index)&&n.interactionGroup[n.currentQuestionIndex].isSubmitted||n.interactionGroup[n.currentQuestionIndex].isSubmitted&&n.interactionGroup[n.currentQuestionIndex].options[e.context.index].isCorrect,!n.checkIfCorrect(e.context.index)&&n.checkIfSelected(e.context.index)&&n.interactionGroup[n.currentQuestionIndex].isSubmitted);t(e,2,0,"option-text mat-toolbar",i),t(e,4,0)},function(t,e){t(e,0,0,i["\u0275nov"](e,4).unbounded),t(e,5,0,e.context.$implicit.text)})}function C(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["mat-raised-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showPrevQuestion()&&i),i},s.d,s.b)),i["\u0275did"](1,180224,null,0,a.b,[i.ElementRef,l.a,u.h,[2,c.a]],null,null),(t()(),i["\u0275ted"](-1,0,[" Prev "]))],null,function(t,e){t(e,0,0,i["\u0275nov"](e,1).disabled||null,"NoopAnimations"===i["\u0275nov"](e,1)._animationMode)})}function S(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["mat-raised-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.submitInteraction()&&i),i},s.d,s.b)),i["\u0275did"](1,180224,null,0,a.b,[i.ElementRef,l.a,u.h,[2,c.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(t()(),i["\u0275ted"](-1,0,["Senden"]))],function(t,e){var n=e.component;t(e,1,0,!n.interactionResponse[n.currentQuestionIndex].length,"primary")},function(t,e){t(e,0,0,i["\u0275nov"](e,1).disabled||null,"NoopAnimations"===i["\u0275nov"](e,1)._animationMode)})}function E(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["mat-raised-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.interactionDone()&&i),i},s.d,s.b)),i["\u0275did"](1,180224,null,0,a.b,[i.ElementRef,l.a,u.h,[2,c.a]],{color:[0,"color"]},null),(t()(),i["\u0275ted"](-1,0,["Fertig"]))],function(t,e){t(e,1,0,"primary")},function(t,e){t(e,0,0,i["\u0275nov"](e,1).disabled||null,"NoopAnimations"===i["\u0275nov"](e,1)._animationMode)})}function x(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["mat-raised-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showNextQuestion()&&i),i},s.d,s.b)),i["\u0275did"](1,180224,null,0,a.b,[i.ElementRef,l.a,u.h,[2,c.a]],{disabled:[0,"disabled"]},null),(t()(),i["\u0275ted"](-1,0,[" Weiter "]))],function(t,e){var n=e.component;t(e,1,0,!(null!=n.interactionGroup[n.currentQuestionIndex]&&n.interactionGroup[n.currentQuestionIndex].canSkip||n.interactionGroup[n.currentQuestionIndex].isSubmitted))},function(t,e){t(e,0,0,i["\u0275nov"](e,1).disabled||null,"NoopAnimations"===i["\u0275nov"](e,1)._animationMode)})}function _(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,25,"div",[],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,12,null,null,null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,4,"div",[["class","flex flex-between"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,b)),i["\u0275did"](4,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,g)),i["\u0275did"](6,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,I)),i["\u0275did"](8,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](9,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,h.b,h.a)),i["\u0275did"](10,49152,null,0,m.a,[],null,null),(t()(),i["\u0275eld"](11,0,null,null,2,"div",[["class","flex flex-between flex-wrapped margin-top-m"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,y)),i["\u0275did"](13,278528,null,0,d.n,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275eld"](14,0,null,null,11,"div",[["class","flex flex-between margin-top-m"]],null,null,null,null,null)),(t()(),i["\u0275eld"](15,0,null,null,2,"div",[["class","mat-accent mat-toolbar"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,C)),i["\u0275did"](17,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](18,0,null,null,4,"div",[["class","mat-accent mat-toolbar"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,S)),i["\u0275did"](20,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,E)),i["\u0275did"](22,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](23,0,null,null,2,"div",[["class","mat-accent mat-toolbar"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,x)),i["\u0275did"](25,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,4,0,null==n.interactionGroupMeta?null:n.interactionGroupMeta.canSkip),t(e,6,0,null==n.interactionGroup[n.currentQuestionIndex]?null:n.interactionGroup[n.currentQuestionIndex].canSkip),t(e,8,0,n.interactionGroup[n.currentQuestionIndex].question),t(e,13,0,n.interactionGroup[n.currentQuestionIndex].options),t(e,17,0,n.currentQuestionIndex>0&&n.currentQuestionIndex<(null==n.interactionGroup?null:n.interactionGroup.length)),t(e,20,0,!n.interactionGroup[n.currentQuestionIndex].isSubmitted),t(e,22,0,n.currentQuestionIndex===n.interactionGroup.length-1&&n.interactionGroup[n.currentQuestionIndex].isSubmitted),t(e,25,0,n.currentQuestionIndex<(null==n.interactionGroup?null:n.interactionGroup.length)-1&&(null==n.interactionGroup?null:n.interactionGroup.length)>1)},function(t,e){t(e,9,0,i["\u0275nov"](e,10).vertical?"vertical":"horizontal",i["\u0275nov"](e,10).vertical,!i["\u0275nov"](e,10).vertical,i["\u0275nov"](e,10).inset)})}function R(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,_)),i["\u0275did"](1,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,null==n.interactionGroup?null:n.interactionGroup.length)},null)}var w=n("mrSG"),T=n("PqYM"),k=n("l5mm"),O=n("xgIS"),P=n("SxV6"),A=n("vkgz"),M=n("lJxs"),G=n("oVAt"),N=n("VX4o"),F=n("qfBg"),L=n("2TuL"),D=n("PnTj"),j=n("r4Kj"),Q=n("e2Qb");const U={techOrder:["azureHtml5JS","flashSS","html5FairPlayHLS","silverlightSS","html5"],nativeControlsForTouch:!1,autoplay:!0,controls:!0,width:"100%",height:"100%",poster:"",logo:{enabled:!1},playbackSpeed:{enabled:!0,initialSpeed:1,speedLevels:[{name:"x3.0",value:3},{name:"x2.0",value:2},{name:"x1.5",value:1.5},{name:"x1.25",value:1.25},{name:"normal",value:1},{name:"x0.85",value:.85},{name:"x0.75",value:.75}]},plugins:{timelineMarker:{markertime:[]}}};class V extends Error{constructor(t,e){super(e),this.code=t}}class z{constructor(t,e,n,i,r,o,s){this.route=t,this.viewerSvc=e,this.telemetry=n,this.valuesSvc=i,this.historySvc=r,this.userSvc=o,this.configSvc=s,this.lastSec=-1,this.firstRealTimeProgressFired=!1,this.lastRealTimeProgressFired=!1,this.interactionMarkersTimeSet=new Set,this.interactionGroupMeta={},this.hasScriptLoaded=!1,this.markersLoaded=!1,this.isFullScreen=!1}ngOnInit(){return w.__awaiter(this,void 0,void 0,function*(){this.paramSubscription=this.route.data.subscribe(t=>{this.processedContent=t.playerDetails.processedResource,this.collectionId=t.playerDetails.toc.identifier,this.onInItFunction()})})}onInItFunction(){return w.__awaiter(this,void 0,void 0,function*(){this.processedContent&&this.processedContent.content&&this.processedContent.interactions&&(this.interactionMarkersTimeSet=new Set(this.processedContent.interactions.interactions.map(t=>t.time)),yield this.loadPlayer())})}loadPlayer(){return w.__awaiter(this,void 0,void 0,function*(){this.disposePlayer();const t=this.viewerSvc.resumePointStringToProgressNumber(this.processedContent.resumeData),e=this.processedContent.interactions.interactions.map(t=>this.transformTime(t.time));this.ivideoContainer.nativeElement.innerHTML='<video id="azuremediaplayer" class="azuremediaplayer amp-flush-skin amp-big-play-centered"></video>',this.player=yield this.init("azuremediaplayer",this.processedContent.interactions.videoUrl,this.processedContent.video.streamingToken,this.processedContent.video.manifest,this.processedContent.content.appIcon,this.processedContent.content.identifier,this.processedContent.content.mimeType,this.collectionId,t,e)})}disposePlayer(){this.player&&"function"==typeof this.player.dispose&&this.player.dispose()}ngOnDestroy(){this.disposePlayer()}transformTime(t){let e="";const n=Math.floor(t/3600),i=Math.floor(t%3600/60),r=Math.floor(t%3600%60);return e+=n>0?`${this.padZeros(n,2)}:`:"00:",(e+=i>0?`${this.padZeros(i,2)}:`:"00:")+(r>0?this.padZeros(r,2):"00")}padZeros(t,e){let n=t+"";for(;n.length<e;)n="0"+n;return n}init(t,e,n,i,r,o,s,a,l,u,c={}){return w.__awaiter(this,void 0,void 0,function*(){if(yield this.scriptSetup(),u.length&&(yield this.markersSetup()),!amp&&(yield Object(T.a)(1e3).toPromise(),!amp))throw new Error("AMP NOT LOADED");let d,p=l;const h=amp(t,this.ampConfig(r,u),()=>{d=Object(k.a)(3e4).subscribe(()=>{this.notifier("RUNNING",o,a,s,h);const t=h.currentTime();t>p&&(p=h.currentTime()),this.historySvc.saveContinueLearning({contextPathId:o,resourceId:o,percentComplete:Math.round(100*p/h.duration())||0,data:JSON.stringify({progress:t,timestamp:Date.now()})},o).toPromise()}),h.addEventListener("ended",()=>{this.notifier("ENDED",o,a,s,h)}),h.addEventListener("play",()=>{this.monitorInteractions(),this.configSvc.instanceConfig.platform.updateRealTimeProgress&&this.monitorForRealTimeProgress(h,o,s),this.notifier("PLAYING",o,a,s,h)}),h.addEventListener("pause",()=>{this.notifier("PAUSED",o,a,s,h)}),h.addEventListener("disposing",()=>{!this.lastRealTimeProgressFired&&this.configSvc.instanceConfig.platform.updateRealTimeProgress&&this._fireRealTimeProgress(h,o,s),this.firstRealTimeProgressFired=!1,this.lastRealTimeProgressFired=!1,this.notifier("UNLOADED",o,a,s,h),d&&d.unsubscribe()}),h.addEventListener("loadeddata",()=>{this.monitorInteractions(),this.notifier("LOADED",o,a,s,h),l>10&&h.currentTime(l-10)})}),m=[],f=[];return i&&n?(this.valuesSvc.isIos&&m.push({src:`https://cvprsg101v.cloudvideo.azure.net/api/ManifestProxy?playbackUrl=${i}(format=m3u8-aapl)&token=`+encodeURIComponent(n),type:"application/vnd.apple.mpegurl",disableUrlRewriter:!0}),m.push({src:i,type:"application/vnd.ms-sstr+xml",protectionInfo:[{type:"AES",authenticationToken:n}]})):e&&m.push({src:e,type:this.getContentTypeForFile(e)}),c.en&&f.push({label:"English",kind:"subtitles",srclang:"en",src:c.en}),f.length?h.src(m,f):h.src(m),h})}monitorForRealTimeProgress(t,e,n){const i=Math.floor(t.currentTime());if(i!==this.lastSec){if(this.lastSec=i,this.firstRealTimeProgressFired&&this.lastRealTimeProgressFired)return;!this.firstRealTimeProgressFired&&i>=Math.min(.1*t.duration(),15)&&(this.firstRealTimeProgressFired=!0,this._fireRealTimeProgress(t,e,n)),!this.lastRealTimeProgressFired&&i>=Math.min(.95*t.duration(),t.duration()-5)&&(this.lastRealTimeProgressFired=!0,this._fireRealTimeProgress(t,e,n))}setTimeout(()=>{t.paused()||this.monitorForRealTimeProgress(t,e,n)},500)}_fireRealTimeProgress(t,e,n){const i={content_type:this.processedContent.content.contentType,current:[t.currentTime().toString()],max_size:t.duration(),mime_type:n,user_id_type:"uuid"};this.userSvc.realTimeProgressUpdate(e,i).subscribe()}monitorInteractions(){const t=Math.floor(this.player.currentTime());t!==this.lastSec&&(this.lastSec=t,this.interactionMarkersTimeSet.has(t)&&this.initiateInteractionManager(t||-1)),setTimeout(()=>{this.player.paused()||this.monitorInteractions()},500)}initiateInteractionManager(t){const e=this.processedContent.interactions.interactions.findIndex(e=>e.time===t);if(e>-1){this.player.pause();const t=this.processedContent.interactions.videoUrl.split("?")[0].lastIndexOf("/")+1,n=this.processedContent.interactions.videoUrl.lastIndexOf("?");this.currentInteractionGroupId=this.processedContent.interactions.interactions[e].id,this.interactionGroupMeta={groupId:this.processedContent.interactions.interactions[e].id,baseVideoUrl:{baseUrl:this.processedContent.interactions.videoUrl.substring(0,t),query:this.processedContent.interactions.videoUrl.substring(n)},canSkip:this.processedContent.interactions.interactions[e].canSkip||!0,preamble:this.processedContent.interactions.interactions[e].preamble,postamble:this.processedContent.interactions.interactions[e].postamble}}}scriptSetup(){return w.__awaiter(this,void 0,void 0,function*(){if(this.hasScriptLoaded)return!0;const t=document.getElementById("ampScript");if(t)return Object(O.a)(t,"load").pipe(Object(P.a)(),Object(A.a)(()=>{this.hasScriptLoaded=!0}),Object(M.a)(()=>!0)).toPromise();const e=document.createElement("script");e.setAttribute("id","ampScript"),e.setAttribute("src","https://amp.azure.net/libs/amp/2.2.0/azuremediaplayer.min.js"),document.body.appendChild(e);const n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href","https://amp.azure.net/libs/amp/2.2.0/skins/amp-flush/azuremediaplayer.min.css"),document.body.appendChild(n),Object(O.a)(e,"load").pipe(Object(P.a)(),Object(A.a)(()=>{this.hasScriptLoaded=!0}),Object(M.a)(()=>!0)).toPromise()})}markersSetup(){return w.__awaiter(this,void 0,void 0,function*(){if(this.markersLoaded)return!0;const t=document.getElementById("markerScript");if(t)return Object(O.a)(t,"load").pipe(Object(P.a)(),Object(A.a)(()=>{this.markersLoaded=!0}),Object(M.a)(()=>!0)).toPromise();const e=document.createElement("script");e.setAttribute("id","markerScript"),e.setAttribute("src","/public-assets/common/plugins/timeline-markers/timelineMarkers.js"),document.body.appendChild(e);const n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href","/public-assets/common/plugins/timeline-markers/timelineMarkers.css"),document.body.appendChild(n),Object(O.a)(e,"load").pipe(Object(P.a)(),Object(A.a)(()=>{this.markersLoaded=!0}),Object(M.a)(()=>!0)).toPromise()})}notifier(t,e,n,i,r){const o={courseId:n,identifier:e,mimeType:i,duration:r.currentTime(),force:!1,isCompleted:!1,isIdeal:r.paused()};this.telemetry.playerTelemetryEvent({app:"WEB_PLAYER_PLUGIN",data:o,plugin:"video",state:t,type:"TELEMETRY"})}ampConfig(t,e){const n=Object.assign({},U);return n.plugins={timelineMarker:{markertime:e}},Object.assign({},n,{poster:t})}getContentTypeForFile(t){let e=t.substring(t.lastIndexOf(".")+1);const n=e.lastIndexOf("?");switch(n>-1&&(e=e.substring(0,n)),e){case"mp4":return"video/mp4";case"mp3":return"audio/mpeg";default:throw new V("MIME_CONTENT_MISMATCH")}}eventFromInteractionGroupManager(t){"resume"===t&&(this.currentInteractionGroupId=null,this.interactionGroupMeta={},this.player.play())}toggleFullscreen(){this.intearctionContainer&&this.intearctionContainer.nativeElement&&!1===this.isFullScreen?(this.requestFullScreen(this.intearctionContainer.nativeElement),this.isFullScreen=!0):this.isFullScreen&&(this.requestExitFullScreen(),this.isFullScreen=!1)}requestFullScreen(t){Object(Q.d)(t)}requestExitFullScreen(){Object(Q.c)()}}var H=n("iInd"),q=i["\u0275crt"]({encapsulation:0,styles:[[".interactive-video-container[_ngcontent-%COMP%]{height:100%;position:relative}.interactive-video-container[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]{height:100%}.interactive-video-container[_ngcontent-%COMP%]   .blur[_ngcontent-%COMP%]{-webkit-filter:blur(2px);filter:blur(2px)}app-interaction-group-manager[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:block;height:100%;width:100%;min-width:300px;overflow:auto;padding:64px 32px;box-sizing:border-box;z-index:10}@media only screen and (max-width:599px){app-interaction-group-manager[_ngcontent-%COMP%]{padding:16px}}.manual-fs[_ngcontent-%COMP%]{width:40px;height:40px;position:absolute;cursor:pointer;bottom:0;right:0;z-index:100}"]],data:{}});function J(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-interaction-group-manager",[],null,[[null,"interactionGroupEvent"]],function(t,e,n){var i=!0;return"interactionGroupEvent"===e&&(i=!1!==t.component.eventFromInteractionGroupManager(n)&&i),i},R,v)),i["\u0275did"](1,114688,null,0,f,[],{interactionGroup:[0,"interactionGroup"],interactionGroupMeta:[1,"interactionGroupMeta"]},{interactionGroupEvent:"interactionGroupEvent"})],function(t,e){var n=e.component;t(e,1,0,n.processedContent.interactions.interactionEvent[n.currentInteractionGroupId],n.interactionGroupMeta)},null)}function $(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{ivideoContainer:0}),i["\u0275qud"](402653184,2,{intearctionContainer:0}),(t()(),i["\u0275eld"](2,0,[[2,0],["intearctionContainer",1]],null,7,"div",[["class","interactive-video-container"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,[[1,0],["ivideoContainer",1]],null,3,"div",[["class","video-container"]],null,null,null,null,null)),i["\u0275prd"](512,null,d.G,d.H,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["\u0275did"](5,278528,null,0,d.m,[d.G],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](6,{blur:0}),(t()(),i["\u0275eld"](7,0,null,null,0,"div",[["class","manual-fs"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.toggleFullscreen()&&i),i},null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,J)),i["\u0275did"](9,16384,null,0,d.o,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component,i=t(e,6,0,n.currentInteractionGroupId);t(e,5,0,"video-container",i),t(e,9,0,n.currentInteractionGroupId&&n.processedContent.interactions.interactionEvent[n.currentInteractionGroupId])},null)}function Y(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-interactive-video",[],null,null,null,$,q)),i["\u0275did"](1,245760,null,0,z,[H.a,D.a,N.a,L.a,G.a,F.a,j.a],null,null)],function(t,e){t(e,1,0)},null)}var B=i["\u0275ccf"]("app-interactive-video",z,Y,{processedContent:"processedContent",collectionId:"collectionId"},{},[]),K=n("zsyL"),W=n("RB3e");class Z{}var X=n("IP0z"),tt=n("cUpR");n.d(e,"InteractiveVideoModuleNgFactory",function(){return et});var et=i["\u0275cmf"](r,[],function(t){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,B]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,d.q,d.p,[i.LOCALE_ID,[2,d.L]]),i["\u0275mpd"](4608,K.a,K.a,[W.a]),i["\u0275mpd"](1073742336,d.c,d.c,[]),i["\u0275mpd"](1073742336,H.s,H.s,[[2,H.x],[2,H.o]]),i["\u0275mpd"](1073742336,Z,Z,[]),i["\u0275mpd"](1073742336,X.a,X.a,[]),i["\u0275mpd"](1073742336,p.n,p.n,[[2,p.f],[2,tt.f]]),i["\u0275mpd"](1073742336,l.b,l.b,[]),i["\u0275mpd"](1073742336,p.y,p.y,[]),i["\u0275mpd"](1073742336,a.c,a.c,[]),i["\u0275mpd"](1073742336,m.b,m.b,[]),i["\u0275mpd"](1073742336,r,r,[]),i["\u0275mpd"](256,i.LOCALE_ID,"de",[]),i["\u0275mpd"](1024,H.m,function(){return[[{path:"",pathMatch:"full",component:z,resolve:{playerDetails:K.a}}]]},[]),i["\u0275mpd"](256,i.TRANSLATIONS_FORMAT,"xlf",[])])})},Jmk9:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("z6cu"),r=n("VX4o"),o=n("8Y7J"),s=n("IheW");class a{constructor(t,e){this.http=t,this.telemetrySvc=e,this.API_BASE="/clientApi/v2",this.USER_API=`${this.API_BASE}/user`,this.apiEndpoints={USER_HISTORY:`${this.USER_API}/history`,USER_CONTINUE_LEARNING:`${this.USER_API}/history/continue`}}fetchContinueLearning(t,e,n){return this.http.get(`${this.apiEndpoints.USER_CONTINUE_LEARNING}?pageSize=${t}`+(e?`&pageState=${e}`:"")+(n?`&email=${n}`:""))}saveContinueLearning(t,e){const n=this.apiEndpoints.USER_CONTINUE_LEARNING;return Object.keys(t).length?this.http.post(n,t):(this.telemetrySvc.errorTelemetryEvent(n,t,e),Object(i.a)({message:"EMPTY_REQUEST"}))}fetchContentContinueLearning(t){return this.http.get(`${this.apiEndpoints.USER_CONTINUE_LEARNING}/${t}`)}addHistory(t){return this.http.post(this.apiEndpoints.USER_HISTORY+"/"+t,{})}deleteHistory(t){return this.http.delete(this.apiEndpoints.USER_HISTORY+"/"+t)}}a.ngInjectableDef=o["\u0275\u0275defineInjectable"]({factory:function(){return new a(o["\u0275\u0275inject"](s.c),o["\u0275\u0275inject"](r.a))},token:a,providedIn:"root"})},PnTj:function(t,e,n){"use strict";var i=n("mrSG"),r=n("xgIS"),o=n("pLZG"),s=n("5DKC"),a=n("LRne"),l=n("JIr8"),u=n("8Y7J"),c=n("IheW");class d{constructor(t){this.http=t,this.apiEndpoints={setCookie:`${s.c}/videojs/setCookie`,setS3Cookie:`${s.d}/setS3Cookie/setCookie`}}setVideoCookie(t){return this.http.post(this.apiEndpoints.setCookie,{path:t}).pipe(Object(l.a)(t=>Object(a.a)(!0)))}setS3Cookie(t){return this.http.post(this.apiEndpoints.setS3Cookie,{path:t}).pipe(Object(l.a)(t=>Object(a.a)(!0)))}}d.ngInjectableDef=u["\u0275\u0275defineInjectable"]({factory:function(){return new d(u["\u0275\u0275inject"](c.c))},token:d,providedIn:"root"});var p=n("hFHK"),h=n("NBun"),m=n("oVAt"),f=n("vPp1");n.d(e,"a",function(){return y});const v="DATA_REQUEST",b="DATA_RESPONSE",g=new Set(Object.values(p.a));class I extends Error{constructor(t){super(t),this.code=t}}class y{constructor(t,e,n,i,r){this.http=t,this.contentSvc=e,this.miscSvc=n,this.historySvc=i,this.s3ContentApi=r,this.initGlobalDataRequestResponder()}updateViewCountAndHistoryOnLoad(t,e){this.contentSvc.updateViewCount(e).toPromise(),t&&t!==e&&this.historySvc.saveContinueLearning({contextPathId:t,resourceId:e,percentComplete:0,data:JSON.stringify({timestamp:Date.now()})},e).toPromise().catch(t=>console.warn(t)),this.historySvc.addToHistory(e)}processResponse(t){return i.__awaiter(this,void 0,void 0,function*(){const e={id:t.id,data:null},n=this.resumePoint(t.contentId);try{const r=yield this.fetchContentAndValidate(t.contentId);e.data=yield this.transformContent(r),e.data.resumeData=yield n}catch(i){e.error=i.code||"UNKNOWN_ERROR"}return e})}fetchContentAndValidate(t){return i.__awaiter(this,void 0,void 0,function*(){try{const n=yield this.contentSvc.fetchContent(t).toPromise();if("Resource"!==n.contentType&&"Knowledge Artifact"!==n.contentType)throw new I("INVALID_RESOURCE");if(!g.has(n.mimeType))throw new I("INVALID_MIME");return n}catch(e){throw new I(e&&e.code||"UNKNOWN_ERROR")}})}transformContent(t){return i.__awaiter(this,void 0,void 0,function*(){if(t.artifactUrl.indexOf("content-store")>=0&&(yield this.setS3Cookie(t.artifactUrl)),"Certification"===t.resourceType)return{content:Object.assign({},t,{mimeType:p.a.certification})};switch(t.mimeType){case p.a.mp4:const e=yield this.transformVideo(t);return{content:t,video:e};case p.a.m3u8:return yield this.setVideojsCookie(t.artifactUrl),{content:t};case p.a.quiz:const n=yield this.transformQuiz(t);return{content:t,quiz:n};case p.a.webModule:case p.a.webModuleExercise:const i=yield this.transformWebModule(t);return{content:t,webModule:i};case p.a.collectionResource:const r=yield this.transformCollectionResource(t);return{content:t,collectionResource:r};case p.a.handson:const o=yield this.transformHandsOn(t);return{content:t,handsOn:o};case p.a.classDiagram:const s=yield this.transformClassDiagram(t);return{content:t,classDiagram:s};case p.a.rdbms:const a=yield this.transformDbmsModule(t);return{content:t,rdbms:a};case p.a.interaction:const l=yield this.transformInteractions(t),u=yield this.transformVideo(t);return{content:t,interactions:l,video:u};default:return{content:t}}})}transformVideo(t){return i.__awaiter(this,void 0,void 0,function*(){const e={file:t.artifactUrl,streamingToken:null,manifest:null};if(!(t.msArtifactDetails&&t.msArtifactDetails.channelId&&t.msArtifactDetails.videoId))return e;try{const{manifest:i,streamingToken:r}=yield this.miscSvc.fetchVideoTokens(t.msArtifactDetails.channelId,t.msArtifactDetails.videoId).toPromise();return e.streamingToken=r,e.manifest=i,e}catch(n){}return e})}transformQuiz(t){return i.__awaiter(this,void 0,void 0,function*(){return yield this.http.get(t.artifactUrl).toPromise().catch(t=>{throw new I("MANIFEST_FETCH_FAILED")})})}transformHandsOn(t){return i.__awaiter(this,void 0,void 0,function*(){return yield this.http.get(t.artifactUrl).toPromise().catch(t=>{throw new I("MANIFEST_FETCH_FAILED")})})}transformClassDiagram(t){return i.__awaiter(this,void 0,void 0,function*(){return yield this.http.get(t.artifactUrl).toPromise().catch(t=>{throw new I("MANIFEST_FETCH_FAILED")})})}transformDbmsModule(t){return i.__awaiter(this,void 0,void 0,function*(){return yield this.http.get(t.artifactUrl).toPromise()})}transformWebModule(t){return i.__awaiter(this,void 0,void 0,function*(){return yield this.http.get(t.artifactUrl).toPromise().catch(t=>{throw new I("MANIFEST_FETCH_FAILED")})})}transformCollectionResource(t){return i.__awaiter(this,void 0,void 0,function*(){return yield this.http.get(t.artifactUrl).toPromise().catch(t=>{throw new I("MANIFEST_FETCH_FAILED")})})}transformInteractions(t){return i.__awaiter(this,void 0,void 0,function*(){return yield this.http.get(t.artifactUrl).toPromise().catch(t=>{throw new I("MANIFEST_FETCH_FAILED")})})}resumePoint(t){return i.__awaiter(this,void 0,void 0,function*(){try{const n=yield this.historySvc.fetchContentContinueLearning(t).toPromise();if(n&&Array.isArray(n.results)&&n.results.length>0&&n.results[0].continueLearningData)return n.results[0].continueLearningData.data}catch(e){}return null})}setVideojsCookie(t){return i.__awaiter(this,void 0,void 0,function*(){yield this.s3ContentApi.setVideoCookie(t).toPromise().catch(t=>{throw new I("COOKIE_SET_FAILURE")})})}setS3Cookie(t){return i.__awaiter(this,void 0,void 0,function*(){yield this.s3ContentApi.setS3Cookie(t).toPromise().catch(t=>{throw new I("COOKIE_SET_FAILURE")})})}initGlobalDataRequestResponder(){Object(r.a)(window,"message").pipe(Object(o.a)(t=>t&&t.data&&t.data.type===v&&Boolean(t.data.data.contentId)&&Boolean(t.source)&&"function"==typeof t.source.postMessage)).subscribe(t=>i.__awaiter(this,void 0,void 0,function*(){const e=t.source,n=t.data,i=yield this.processResponse(n.data);e.postMessage({app:"WEB_PLAYER",data:i,plugin:"NONE",state:"NONE",type:b},"*")}))}resumePointStringToProgressNumber(t){try{const n=JSON.parse(t),i=parseInt(n.progress.toString(),10);return Number.isNaN(i)||Math.round(i)!==i?0:i}catch(e){return 0}}}y.ngInjectableDef=u["\u0275\u0275defineInjectable"]({factory:function(){return new y(u["\u0275\u0275inject"](c.c),u["\u0275\u0275inject"](h.a),u["\u0275\u0275inject"](f.a),u["\u0275\u0275inject"](m.a),u["\u0275\u0275inject"](d))},token:y,providedIn:"root"})},l5mm:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("HDdC"),r=n("D0XW"),o=n("Y7HM");function s(t=0,e=r.a){return(!Object(o.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=r.a),new i.a(n=>(n.add(e.schedule(a,t,{subscriber:n,counter:0,period:t})),n))}function a(t){const{subscriber:e,counter:n,period:i}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:i},i)}},oVAt:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("Jmk9"),r=n("8Y7J");class o{constructor(t){this.historyApiSvc=t}fetchContinueLearning(t,e,n){return this.historyApiSvc.fetchContinueLearning(t,e,n)}fetchContentContinueLearning(t){return this.historyApiSvc.fetchContentContinueLearning(t)}saveContinueLearning(t,e){return this.historyApiSvc.saveContinueLearning(t,e)}addToHistory(t){return this.historyApiSvc.addHistory(t)}}o.ngInjectableDef=r["\u0275\u0275defineInjectable"]({factory:function(){return new o(r["\u0275\u0275inject"](i.a))},token:o,providedIn:"root"})}}]);