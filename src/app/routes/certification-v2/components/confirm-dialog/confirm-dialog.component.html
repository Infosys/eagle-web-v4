<!--               "Copyright 2020 Infosys Ltd.
               Use of this source code is governed by GPL v3 license that can be found in the LICENSE file or at https://opensource.org/licenses/GPL-3.0
               This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License version 3" -->
<section mat-dialog-title>
  <div class="mat-caption">
    <ws-request-item-type [itemType]="data.approvalItem.record_type"></ws-request-item-type>
  </div>
  <h3 class="mat-h3 text-truncate">{{ data.approvalItem.certification_name }}</h3>
</section>

<section mat-dialog-content>
  <ng-container [ngSwitch]="data.approvalItem.record_type">
    <ng-container *ngSwitchCase="'proctor_approval'">
      <ng-container [ngSwitch]="data.actionType">
        <p class="mat-body" i18n *ngSwitchCase="'accept'">
          Are you sure you wish to proctor {{ data.approvalItem.user.name }}?
        </p>
        <p class="mat-body" i18n *ngSwitchCase="'decline'">
          Are you sure you wish to decline {{ data.approvalItem.user.name }}'s proctoring request?
        </p>
      </ng-container>
    </ng-container>

    <ng-container *ngSwitchCase="'budget_approval'">
      <ng-container [ngSwitch]="data.actionType">
        <p class="mat-body" i18n *ngSwitchCase="'accept'">
          Are you sure you wish to approve {{ data.approvalItem.user.name }}'s reimbursement request?
        </p>
        <p class="mat-body" i18n *ngSwitchCase="'decline'">
          Are you sure you wish to decline {{ data.approvalItem.user.name }}'s reimbursement request?
        </p>
      </ng-container>
      <p class="mat-body" i18n="amount: currency number">
        Amount: {{ data.approvalItem.currency }} {{ data.approvalItem.amount }}
      </p>
    </ng-container>

    <ng-container *ngSwitchCase="'result_verification'">
      <ng-container [ngSwitch]="data.actionType">
        <p class="mat-body" i18n *ngSwitchCase="'accept'">
          Are you sure you wish to accept {{ data.approvalItem.user.name }}'s document proof?
        </p>
        <p class="mat-body" i18n *ngSwitchCase="'decline'">
          Are you sure you wish to decline {{ data.approvalItem.user.name }}'s document proof?
        </p>
      </ng-container>
    </ng-container>
  </ng-container>

  <section
    class="margin-top-xs"
    *ngIf="
      (data.approvalItem.record_type === 'budget_approval' && data.actionType === 'decline') ||
      data.approvalItem.record_type === 'result_verification'
    "
  >
    <mat-form-field class="width-1-1">
      <input matInput type="text" [formControl]="reasonCtrl" placeholder="Please provide a reason" i18n-placeholder />
      <mat-hint *ngIf="data.approvalItem.record_type === 'result_verification' && !reasonCtrl.value" i18n>
        The reason must be within 500 characters.
      </mat-hint>
      <mat-hint *ngIf="data.approvalItem.record_type === 'budget_approval' && !reasonCtrl.value" i18n>
        The reason must be within 1000 characters.
      </mat-hint>
    </mat-form-field>
  </section>
</section>

<section mat-dialog-actions>
  <button mat-flat-button [color]="'primary'" class="margin-right-xs" i18n (click)="sendAction()">
    <ng-container [ngSwitch]="data.actionType">
      <ng-container *ngSwitchCase="'accept'" i18n>ACCEPT</ng-container>
      <ng-container *ngSwitchCase="'decline'" i18n>DECLINE</ng-container>
    </ng-container>
  </button>
  <button mat-stroked-button mat-dialog-close [color]="'primary'" i18n>CANCEL</button>
</section>
